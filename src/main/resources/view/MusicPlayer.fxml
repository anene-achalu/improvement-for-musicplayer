<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane fx:id="mainContainer"
            xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.musicplayer.controller.MusicPlayerController">

    <!-- TOP: MenuBar + Now Playing + Album Art -->
    <top>
        <VBox>
            <MenuBar>
                <Menu text="File">
                    <MenuItem text="Save Playlist" onAction="#handleSavePlaylist"/>
                    <MenuItem text="Load Playlist" onAction="#handleLoadPlaylist"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Exit" onAction="#handleExit"/>
                </Menu>
                <Menu text="Theme">
                    <CheckMenuItem fx:id="themeMenuItem" text="Light Mode" onAction="#handleThemeToggle"/>
                </Menu>
            </MenuBar>

            <VBox spacing="5" alignment="CENTER" styleClass="now-playing-section">
                <padding>
                    <Insets top="5" bottom="5" left="5" right="5"/>
                </padding>

                <ImageView fx:id="albumArtImageView"
                           fitHeight="100.0"
                           fitWidth="100.0"
                       preserveRatio="true"
                       pickOnBounds="true">
                    <!-- No default image â†’ we'll set it from code -->
                </ImageView>

                <!-- Song Title -->
                <Label fx:id="songTitleLabel"
                       text="JavaFX Music Player - No song selected"
                       styleClass="song-title"
                       wrapText="true"
                       textAlignment="CENTER"/>
            </VBox>
        </VBox>
    </top>

    <!-- CENTER: Lyrics -->
    <center>
        <VBox spacing="10" styleClass="center-container" VBox.vgrow="ALWAYS">
            <padding>
                <Insets top="10" bottom="10" left="10" right="10"/>
            </padding>
            <VBox fx:id="lyricsContainer" VBox.vgrow="ALWAYS"/>
        </VBox>
    </center>

    <!-- LEFT: Playlist -->
    <left>
        <VBox spacing="10" styleClass="playlist-section" prefWidth="400">
            <padding>
                <Insets top="10" bottom="10" left="10" right="10"/>
            </padding>
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Playlist" styleClass="section-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <ToggleButton fx:id="showFavoritesButton" text="Favorites" onAction="#handleShowFavorites" styleClass="add-btn"/>
            </HBox>

            <TextField fx:id="searchField" promptText="Search..." HBox.hgrow="ALWAYS"/>

            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button text="Add Songs" onAction="#handleAddSongs" styleClass="add-btn"/>
                <Button text="Remove Song" onAction="#handleRemoveSong" styleClass="add-btn"/>
            </HBox>

            <ListView fx:id="playlistView" VBox.vgrow="ALWAYS"/>
        </VBox>
    </left>

    <!-- BOTTOM: Controls -->
    <bottom>
        <VBox spacing="10" styleClass="control-section">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <!-- Progress -->
            <HBox spacing="10" alignment="CENTER" styleClass="progress-section">
                <Label fx:id="currentTimeLabel" text="00:00" styleClass="time-label"/>
                <Slider fx:id="progressSlider" prefWidth="500" styleClass="progress-slider" HBox.hgrow="ALWAYS"/>
                <Label fx:id="totalTimeLabel" text="00:00" styleClass="time-label"/>
            </HBox>

            <!-- Buttons -->
            <HBox spacing="15" alignment="CENTER" styleClass="button-section">
                <ToggleButton fx:id="shuffleButton" text="ðŸ”€" onAction="#handleShuffle" styleClass="control-btn">
                    <tooltip><Tooltip text="Shuffle"/></tooltip>
                </ToggleButton>
                <Button fx:id="prevButton" text="â®" onAction="#handlePrevious" styleClass="control-btn">
                    <tooltip><Tooltip text="Previous"/></tooltip>
                </Button>
                <ToggleButton fx:id="playPauseButton" text="â–¶" onAction="#handlePlayPause" styleClass="control-btn">
                    <tooltip><Tooltip text="Play/Pause"/></tooltip>
                </ToggleButton>
                <Button fx:id="stopButton" text="â¹" onAction="#handleStop" styleClass="control-btn">
                    <tooltip><Tooltip text="Stop"/></tooltip>
                </Button>
                <Button fx:id="nextButton" text="â­" onAction="#handleNext" styleClass="control-btn">
                    <tooltip><Tooltip text="Next"/></tooltip>
                </Button>
                <Button fx:id="repeatButton" text="ðŸ”" onAction="#handleRepeat" styleClass="control-btn"/>

                <Separator orientation="VERTICAL" prefHeight="40"/>

                <Label text="Volume:" styleClass="volume-label"/>
                <Slider fx:id="volumeSlider" prefWidth="120" value="70" styleClass="volume-slider"/>
                <Label fx:id="volumeLabel" text="70%" styleClass="time-label"/>
                <Button fx:id="muteButton" text="ðŸ”Š" onAction="#handleMute" styleClass="control-btn">
                    <tooltip><Tooltip text="Mute/Unmute"/></tooltip>
                </Button>
            </HBox>
        </VBox>
    </bottom>

</BorderPane>